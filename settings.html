<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Settings | Farm Management System</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background-image: url('images.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }
  .overlay {
    background-color: rgba(255, 255, 255, 0.7);
    min-height: 100vh;
    padding: 20px;
  }
  .navbar { background-color: rgba(46,125,47,0.85); }
  .navbar-brand, .nav-link { color: white !important; font-weight: 600; }
  .card { background-color: rgba(255,255,255,0.85); border-radius: 10px; box-shadow:0 0 10px rgba(0,0,0,0.1); margin-bottom:20px; }
  .btn:hover { transform: scale(1.05); transition: transform 0.3s ease; }
  .toast-container { position: fixed; top: 20px; right: 20px; z-index:1055; }
</style>
</head>
<body>

<div class="overlay">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg mb-4">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">← Dashboard</a>
      <a class="nav-link" href="cropManagement.html">Crops</a>
      <a class="nav-link" href="finance.html">Finance</a>
      <a class="nav-link" href="inventory.html">Inventory</a>
      <a class="nav-link" href="livesk.html">Livestock</a>
    </div>
  </nav>

  <h3>Settings</h3>

  <div class="toast-container" id="toastContainer"></div>

  <div class="card border-primary">
    <div class="card-header bg-primary text-white">System Preferences</div>
    <div class="card-body">
      <form id="settingsForm">
        <div class="mb-3">
          <label for="username" class="form-label">Profile Name</label>
          <input type="text" class="form-control" id="username" value="">
        </div>
        <div class="mb-3">
          <label for="language" class="form-label">Language</label>
          <select class="form-select" id="language">
            <option selected>English</option>
            <option>বাংলা</option>
            <option>Hindi</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="notifications" class="form-label">Notifications</label>
          <select class="form-select" id="notifications">
            <option selected>Enabled</option>
            <option>Disabled</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="mode" class="form-label">System Mode</label>
          <select class="form-select" id="mode">
            <option selected>Standard</option>
            <option>Advanced</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">Save Changes</button>
      </form>
      <hr>
      <button id="logoutBtn" class="btn btn-danger">Logout</button>
    </div>
  </div>

  <footer class="text-center mt-4 mb-3">
    <p>&copy; 2025 Mobile Farm Management System</p>
  </footer>
</div>

<script>
  const token = localStorage.getItem('token');
  if(!token){ window.location.href = 'login.html'; }

  const showToast = (msg, type='success') => {
    const toast = document.createElement('div');
    toast.className = `toast align-items-center text-bg-${type} border-0 show`;
    toast.setAttribute('role','alert');
    toast.innerHTML = `<div class="d-flex"><div class="toast-body">${msg}</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button></div>`;
    document.getElementById('toastContainer').appendChild(toast);
    setTimeout(()=>toast.remove(),3000);
  }

  // Example: Load username from token payload (optional)
  try {
    const payload = JSON.parse(atob(token.split('.')[1]));
    document.getElementById('username').value = payload.username || '';
  } catch(err){ console.warn('Invalid token payload'); }

  document.getElementById('settingsForm').addEventListener('submit', e=>{
    e.preventDefault();
    showToast('Settings saved (local only)');
  });

  document.getElementById('logoutBtn').addEventListener('click', ()=>{
    localStorage.removeItem('token');
    window.location.href='login.html';
  });
</script>

</body>
</html>
